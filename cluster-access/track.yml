slug: cluster-access
id: i0mojjxixrqc
type: track
title: Logging in to an OpenShift Cluster
description: Logging in to an OpenShift Cluster.
icon: https://logodix.com/logo/1910931.png
level: beginner
tags:
- openshift
owner: openshift
developers:
- btannous@redhat.com
- rjarvine@redhat.com
- nvinto@redhat.com
private: false
published: true
show_timer: true
challenges:
- slug: cluster-access
  id: zfqvfzxpcsiq
  type: challenge
  title: Logging in to an OpenShift Cluster
  notes:
  - type: text
    contents: |-
      ## Goal

      Learn how to log in to OpenShift with the web console and with the `oc` command line tool.

      ## Concepts

      * OpenShift user authentication and authorization basics
      * OpenShift Web Console
      * OpenShift `oc` tool
      * OpenShift Projects and collaboration

      ## Use case

      You must log in to do anything on an OpenShift cluster. To collaborate on an OpenShift Project, you can authorize other users to see or modify resources in your Projects.

      This OpenShift cluster will self-destruct in one hour.
  assignment: |-
    The OpenShift web console provides a convenient method for quickly interacting with and viewing the state of applications you have deployed using OpenShift. Not everything you may want to do can be done through the web console. You will therefore also need to be familiar with using the OpenShift command line tool ``oc``.

    In this course the embedded _Terminal_ provided to you already has ``oc`` installed so you do not need to download and install the ``oc`` client.

    If you were using a different OpenShift cluster and did not already have the ``oc`` command line tool, you can download it by following the links in the _Command Line Tools_ menu option of the web console.

    ![Command Line Tools](https://katacoda.com/openshift/assets/introduction/cluster-access-44/02-command-line-tools.png)

    A link to details on where to get the command line tools was also shown on the initial welcome page when you first accessed the cluster when there were no projects.

    Once you get to the list of downloads, you would need to download the archive specific to your platform, extract the ``oc`` binary and install it.

    To login to the OpenShift cluster used for this course run in the terminal:

    ```
    oc login -u developer -p developer
    ```

    You should see output similar to:

    ```
    Authentication required for https://openshift:6443 (openshift)
    Login successful.

    You don't have any projects. You can try to create a new project, by running

        oc new-project <projectname>
    ```

    Next, create a new project namespace:

    ```
    oc new-project myproject
    ```

    You can list all the projects you currently have access to by running:

    ```
    oc get projects
    ```

    Once logged in, you can verify what user you are logged in by running:

    ```
    oc whoami
    ```

    You can verify which server you are logged into by running:

    ```
    oc whoami --show-server
    ```

    In the case of an external authentication service being used as the identity provider, the required steps are a bit different.

    If you login using ``oc login`` on the command line you will be presented with an error message similar to:

    ```
    Login failed (401 Unauthorized)
    You must obtain an API token by visiting
      https://api.starter-us-east-1.openshift.com/oauth/token/request
    ```

    You would visit the link given, logging in first via the separate authentication service if necessary. You will then be redirected to a page which will give details of the login command to use. This will include an access token to authenticate you for the session.

    Even in the case where user authentication is managed by the OpenShift cluster and user credentials are accepted, you can opt to instead use an access token. You can retrieve the command to run by manually entering the ``/oauth/token/request`` path against the URL for the cluster access endpoint.

    If you are already logged into the web console, you can also retrieve the details of the login command and access token by accessing the _Copy Login Command_ menu option under your login name.

    ![Request Access Token](https://katacoda.com/openshift/assets/introduction/cluster-access-44/02-login-access-token.png)

    Whichever mechanism you use to login from the command line using ``oc login``, the login will periodically expire and you will need to login again. The expiration period is typically 24 hours.
  tabs:
  - title: cli
    type: terminal
    hostname: crc-nonest-1
  - title: web ui
    type: service
    hostname: crc-nonest-1
    port: 30443
  difficulty: basic
  timelimit: 3600
checksum: "8965386514184179072"
