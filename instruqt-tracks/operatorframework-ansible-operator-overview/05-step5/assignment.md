---
slug: step5
id: heznxctg7usz
type: challenge
title: Create a new Operator
tabs:
- title: Terminal 1
  type: terminal
  hostname: container
- title: Visual Editor
  type: code
  hostname: container
  path: /root/tutorial
difficulty: basic
timelimit: 225
---
Next, we'll learn how to use the operator-sdk CLI to create an Ansible Operator project with the 'init' and `create` commands.

Let's begin by connecting to OpenShift:

```
oc login -u admin -p admin https://api.crc.testing:6443 --insecure-skip-tls-verify=true
```

A basic 'init' command looks like this:
```bash
cd /root/tutorial && \
operator-sdk init --plugins=ansible --domain example.com
```
This command tells operator-sdk to initialize a new Ansible Operator project scaffolding with the domain of your choosing.

Among the files generated by this command is a Kubebuilder PROJECT file. Subsequent operator-sdk commands (and help text) run from the project root read this file and are aware that the project type is Ansible.

```bash
operator-sdk create api -h
```

After initilizating our Ansible Operator project, we run the `operator-sdk create api` command and provide the group, version, and kind of the CRD we'd like to create.

```bash
operator-sdk create api --group app --version v1alpha1 --kind App
```

We should now see the following file structure:

```
$ tree

├── Dockerfile
├── Makefile
├── PROJECT
├── config
│   ├── crd
│   │   ├── bases
│   │   │   └── app.example.com_apps.yaml
│   │   └── kustomization.yaml
│   ├── default
│   │   ├── kustomization.yaml
│   │   └── manager_auth_proxy_patch.yaml
│   ├── manager
│   │   ├── kustomization.yaml
│   │   └── manager.yaml
│   ├── prometheus
│   │   ├── kustomization.yaml
│   │   └── monitor.yaml
│   ├── rbac
│   │   ├── app_editor_role.yaml
│   │   ├── app_viewer_role.yaml
│   │   ├── auth_proxy_client_clusterrole.yaml
│   │   ├── auth_proxy_role.yaml
│   │   ├── auth_proxy_role_binding.yaml
│   │   ├── auth_proxy_service.yaml
│   │   ├── kustomization.yaml
│   │   ├── leader_election_role.yaml
│   │   ├── leader_election_role_binding.yaml
│   │   ├── role.yaml
│   │   └── role_binding.yaml
│   ├── samples
│   │   ├── app_v1alpha1_app.yaml
│   │   └── kustomization.yaml
│   ├── scorecard
│   │   ├── bases
│   │   │   └── config.yaml
│   │   ├── kustomization.yaml
│   │   └── patches
│   │       ├── basic.config.yaml
│   │       └── olm.config.yaml
│   └── testing
│       ├── debug_logs_patch.yaml
│       ├── kustomization.yaml
│       ├── manager_image.yaml
│       └── pull_policy
│           ├── Always.yaml
│           ├── IfNotPresent.yaml
│           └── Never.yaml
├── molecule
│   ├── default
│   │   ├── converge.yml
│   │   ├── create.yml
│   │   ├── destroy.yml
│   │   ├── kustomize.yml
│   │   ├── molecule.yml
│   │   ├── prepare.yml
│   │   ├── tasks
│   │   │   └── app_test.yml
│   │   └── verify.yml
│   └── kind
│       ├── converge.yml
│       ├── create.yml
│       ├── destroy.yml
│       └── molecule.yml
├── playbooks
├── requirements.yml
├── roles
│   └── app
│       ├── README.md
│       ├── defaults
│       │   └── main.yml
│       ├── files
│       ├── handlers
│       │   └── main.yml
│       ├── meta
│       │   └── main.yml
│       ├── tasks
│       │   └── main.yml
│       ├── templates
│       └── vars
│           └── main.yml
└── watches.yaml

```

# Running 'operator-sdk init'
***
__Now it's your turn!__ We'll be building a [__Memcached__](https://memcached.org/) Ansible Operator for the remainder of this scenario.
***

Let's create a new directory for our project:

```
mkdir -p $HOME/tutorial/memcached-operator
```

Navigate to the directory:

```
cd $HOME/tutorial/memcached-operator
```

Initialize a new Ansible-based Operator SDK project for the Memcached Operator:

```
operator-sdk init --plugins=ansible --domain example.com
```

Create the Memcached API and generate an Ansible role skeleton.  This will ensure our controller is setup to watch the
Memcached resource with APIVersion 'cache.example.com/v1alpha1' and Kind 'Memcached'.

```
operator-sdk create api --group cache --version v1alpha1 --kind Memcached
```

## Inspecting the results

Inspect the memcached-operator directory structure for yourself with 'tree', and then 'cd' into it.

```
tree
```

### Project Scaffolding Layout

After creating a new operator project the directory has numerous generated folders and files. The following
table describes a basic rundown of each generated file/directory.

| File/Folders   | Purpose                           |
| :---           | :--- |
| config | Kustomize YAML definitions required to launch our controller on a cluster. It is the target directory to hold our CustomResourceDefinitions, RBAC configuration, and WebhookConfigurations.
| Dockerfile | The container build file used to build your Ansible Operator container image. |
| Makefile | Make targets for building and deploying your controller. |
| molecule | Used for Ansible Based Operator Testing. See [this link](https://sdk.operatorframework.io/docs/building-operators/ansible/testing-guide/) for more information.
| playbooks | placeholder for possible ansible playbook.
| PROJECT | Kubebuilder metadata for scaffolding new components. |
| requirements.yaml | requirements.yaml for defining an Ansible collection.
| roles | Contains an Ansible Role initialized using [Ansible Galaxy](https://docs.ansible.com/ansible/latest/reference_appendices/galaxy.html)
| watches.yaml | Contains Group, Version, Kind, and Ansible invocation method. |
